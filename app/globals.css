@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
  --focus-ring-color: #C27803;
  --focus-ring-offset: 3px;
  /* SC 2.4.12 AAA: scroll-padding-top clears sticky navbar height (~72px) + safety buffer */
  --scroll-padding-top: 80px;
  color-scheme: light;

  /* ============================================
     WCAG 1.4.6 Contrast (Enhanced) - Level AAA
     All text colors meet 7:1 contrast ratio for normal text
     and 4.5:1 for large text (18pt+ or 14pt bold)
     Verified against both #ffffff and #f0f4f8 backgrounds
     ============================================ */

  /* Primary text colors - meet 7:1 against white */
  --text-primary: #1e293b;    /* slate-900: 12.6:1 contrast */
  --text-secondary: #334155;  /* slate-700: 10.3:1 contrast - WCAG AAA */
  --text-muted: #334155;      /* slate-700: 10.3:1 contrast - merged with --text-secondary (AAA) */

  /* Error/success colors with sufficient contrast */
  --text-error: #991b1b;      /* red-800: 8.3:1 contrast - WCAG AAA */
  --text-success: #064e3b;    /* emerald-900: 9.7:1 contrast - WCAG AAA */
  --text-warning: #78350f;    /* amber-900: 9.1:1 contrast - WCAG AAA */

  /* Link colors */
  --link-color: #7c2d12;      /* orange-900: 9.4:1 contrast - WCAG AAA */
  --link-hover: #7c2d12;      /* orange-900: 9.4:1 contrast - WCAG AAA */
}

html {
  /* SC 2.4.12 AAA: prevent sticky headers from obscuring focused elements */
  scroll-padding-top: var(--scroll-padding-top);
}

body {
  font-family: var(--font-jakarta), ui-sans-serif, system-ui, -apple-system,
    BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* SC 3.1.4: remove Tailwind preflight's dotted underline on <abbr> â€” the
   title tooltip still works on hover; the dotted line is distracting in
   button/nav contexts.  Tailwind v4 preflight uses `abbr:where([title])`
   which has low specificity, so a plain `abbr[title]` selector wins. But
   some browsers add their own UA rule, so we use !important as a fallback. */
abbr[title] {
  text-decoration: none !important;
  -webkit-text-decoration: none !important;
}

button,
a,
[role="button"] {
  cursor: pointer;
}

/* ============================================
   WCAG 2.4.7: Focus Visible
   Ensures visible focus indicators for keyboard navigation
   ============================================ */

/* Default focus-visible outline for all interactive elements */
/* SC 2.4.13 AAA: 3px minimum width, box-shadow halo for enclosed area requirement */
:focus-visible {
  outline: 3px solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 6px rgba(194, 120, 3, 0.15);
}

/* Remove default focus for mouse/touch users (pointer-based) */
:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast focus for form inputs */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 3px solid var(--focus-ring-color);
  outline-offset: 0;
  border-color: var(--focus-ring-color);
  box-shadow: 0 0 0 5px rgba(194, 120, 3, 0.15);
}

/* Enhanced focus for buttons */
button:focus-visible,
[role="button"]:focus-visible {
  outline: 3px solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 6px rgba(194, 120, 3, 0.2);
}

/* Focus styles for links */
a:focus-visible {
  outline: 3px solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  border-radius: 2px;
  box-shadow: 0 0 0 6px rgba(194, 120, 3, 0.15);
}

/* Enforce a consistent 3px focus treatment even when utility classes use focus:outline-none/focus:ring-1. */
:where(button, a, input, textarea, select, [role="button"], [tabindex]):focus-visible {
  outline: 3px solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  box-shadow: 0 0 0 6px rgba(194, 120, 3, 0.2) !important;
}

/* ============================================
   WCAG 1.4.13: Content on Hover or Focus
   Ensures dropdown/tooltip content is accessible
   ============================================ */
[aria-expanded="true"] + [role="menu"],
[aria-expanded="true"] + [role="listbox"],
[aria-haspopup="true"]:focus + [role="menu"] {
  visibility: visible;
  opacity: 1;
}

/* ============================================
   Reduced Motion Support (WCAG 2.3.3)
   Respects user preference for reduced motion
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   High Contrast Mode Support
   Ensures visibility in Windows High Contrast Mode
   ============================================ */
@media (forced-colors: active) {
  :focus-visible {
    outline: 3px solid CanvasText;
    outline-offset: 3px;
  }

  button,
  [role="button"] {
    border: 1px solid ButtonText;
  }
}

/* ============================================
   WCAG 2.2 NEW SUCCESS CRITERIA SUPPORT
   ============================================ */

/* --------------------------------------------
   2.4.11 Focus Not Obscured (Minimum) - Level AA
   Ensures focused elements are not hidden by sticky headers/footers
   -------------------------------------------- */
[data-sticky="true"],
.sticky,
header[class*="sticky"],
nav[class*="sticky"] {
  /* Ensure focus indicators are visible above sticky elements */
  z-index: 40;
}

:focus-visible {
  /* Ensure focus ring appears above overlapping elements */
  position: relative;
  z-index: 1;
}

/* --------------------------------------------
   2.4.13 Focus Appearance - Level AAA (partial AA support)
   Minimum 2px focus indicator with sufficient contrast
   -------------------------------------------- */
:focus-visible {
  /* Already implemented above with 3px solid outline */
  /* SC 2.4.13 AAA: minimum 3px */
  outline-width: 3px !important;
}

/* --------------------------------------------
   2.5.7 Dragging Movements - Level AA
   Provide alternatives to drag operations
   Note: Implemented in components as needed
   -------------------------------------------- */

/* --------------------------------------------
   2.5.8 Target Size (Minimum) - Level AA
   Interactive elements should be at least 24x24px
   Exception: inline links within text
   -------------------------------------------- */
/* SC 2.5.5 AAA: 44x44px minimum for all interactive controls, all devices */
button,
[role="button"],
input[type="checkbox"],
input[type="radio"],
select {
  min-height: 44px;
  min-width: 44px;
}

/* Non-inline links (navigation, standalone CTAs) */
a:not([class*="inline"]):not(p a):not(li a) {
  min-height: 44px;
}

/* Ensure adequate spacing between adjacent targets */
button + button,
[role="button"] + [role="button"] {
  margin-left: 8px;
}

/* Custom checkbox/radio styling with proper target size */
input[type="checkbox"],
input[type="radio"] {
  /* Ensure the clickable area meets minimum size */
  cursor: pointer;
}

/* --------------------------------------------
   3.2.6 Consistent Help - Level A
   Help mechanisms appear in same relative location
   Note: Implemented via consistent UI placement
   -------------------------------------------- */

/* --------------------------------------------
   3.3.7 Redundant Entry - Level A
   Don't require re-entry of previously submitted info
   Note: Implemented via form state management
   -------------------------------------------- */

/* --------------------------------------------
   3.3.8 Accessible Authentication (Minimum) - Level AA
   Don't require cognitive function tests for auth
   Note: Implemented via auth flow design
   -------------------------------------------- */

/* --------------------------------------------
   3.3.9 Accessible Authentication (Enhanced) - Level AAA
   No object/image recognition required
   Note: Implemented via auth flow design
   -------------------------------------------- */

/* ============================================
   ADDITIONAL ACCESSIBILITY ENHANCEMENTS
   ============================================ */

/* Ensure error messages have proper contrast and don't rely on color alone */
[role="alert"],
.error-message {
  /* Use border in addition to color */
  border-left: 3px solid var(--text-error);
  padding-left: 0.75rem;
}

/* ============================================
   SC 2.4.13 AAA: White focus ring on dark button backgrounds
   #C27803 amber achieves only ~2.67:1 against orange-900/red-800/emerald-900
   White (#fff) achieves 9.4:1+ against these dark backgrounds
   ============================================ */
[class*="bg-orange-9"]:focus-visible,
[class*="bg-orange-8"]:focus-visible,
[class*="bg-red-8"]:focus-visible,
[class*="bg-red-9"]:focus-visible,
[class*="bg-emerald-9"]:focus-visible,
[class*="bg-slate-8"]:focus-visible,
[class*="bg-slate-9"]:focus-visible {
  outline-color: #ffffff !important;
  box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.25) !important;
}

/* Bring common muted utility tokens to AAA-safe contrast levels on light backgrounds. */
.text-slate-400,
.text-slate-500,
.text-gray-400,
.text-gray-500 {
  color: var(--text-secondary) !important;
}

/* Keep placeholder text readable on white/light surfaces. */
input::placeholder,
textarea::placeholder {
  color: #475569 !important;
  opacity: 1;
}

/* Visible focus for custom controls */
[role="checkbox"]:focus-visible,
[role="radio"]:focus-visible,
[role="switch"]:focus-visible,
[role="slider"]:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: 2px;
}

/* Ensure dialogs/modals trap focus properly */
[role="dialog"],
[role="alertdialog"] {
  /* Ensure modal appears above other content */
  z-index: 50;
}

/* Screen reader only class */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Screen reader only but focusable */
.sr-only-focusable:focus,
.sr-only-focusable:focus-within {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}
