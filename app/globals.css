@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
  --focus-ring-color: #C27803;
  --focus-ring-offset: 2px;
  color-scheme: light;

  /* ============================================
     WCAG 1.4.3 Contrast (Minimum) - Level AA
     All text colors meet 4.5:1 contrast ratio for normal text
     and 3:1 for large text (18pt+ or 14pt bold)
     ============================================ */

  /* Primary text colors - meet 4.5:1 against white */
  --text-primary: #1e293b;    /* slate-800: 12.6:1 contrast */
  --text-secondary: #475569;  /* slate-600: 6.4:1 contrast */
  --text-muted: #64748b;      /* slate-500: 4.6:1 contrast - min for normal text */

  /* Error/success colors with sufficient contrast */
  --text-error: #b91c1c;      /* red-700: 5.6:1 contrast */
  --text-success: #047857;    /* emerald-700: 5.0:1 contrast */
  --text-warning: #b45309;    /* amber-700: 4.5:1 contrast */

  /* Link colors */
  --link-color: #9a3412;      /* orange-800: 6.6:1 contrast */
  --link-hover: #7c2d12;      /* orange-900: 9.3:1 contrast */
}

body {
  font-family: var(--font-jakarta), ui-sans-serif, system-ui, -apple-system,
    BlinkMacSystemFont, "Segoe UI", sans-serif;
}

button,
a,
[role="button"] {
  cursor: pointer;
}

/* ============================================
   WCAG 2.4.7: Focus Visible
   Ensures visible focus indicators for keyboard navigation
   ============================================ */

/* Default focus-visible outline for all interactive elements */
:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* Remove default focus for mouse/touch users (pointer-based) */
:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast focus for form inputs */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: 0;
  border-color: var(--focus-ring-color);
}

/* Enhanced focus for buttons */
button:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 4px rgba(194, 120, 3, 0.2);
}

/* Focus styles for links */
a:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  border-radius: 2px;
}

/* ============================================
   WCAG 1.4.13: Content on Hover or Focus
   Ensures dropdown/tooltip content is accessible
   ============================================ */
[aria-expanded="true"] + [role="menu"],
[aria-expanded="true"] + [role="listbox"],
[aria-haspopup="true"]:focus + [role="menu"] {
  visibility: visible;
  opacity: 1;
}

/* ============================================
   Reduced Motion Support (WCAG 2.3.3)
   Respects user preference for reduced motion
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   High Contrast Mode Support
   Ensures visibility in Windows High Contrast Mode
   ============================================ */
@media (forced-colors: active) {
  :focus-visible {
    outline: 3px solid CanvasText;
    outline-offset: 2px;
  }

  button,
  [role="button"] {
    border: 1px solid ButtonText;
  }
}

/* ============================================
   WCAG 2.2 NEW SUCCESS CRITERIA SUPPORT
   ============================================ */

/* --------------------------------------------
   2.4.11 Focus Not Obscured (Minimum) - Level AA
   Ensures focused elements are not hidden by sticky headers/footers
   -------------------------------------------- */
[data-sticky="true"],
.sticky,
header[class*="sticky"],
nav[class*="sticky"] {
  /* Ensure focus indicators are visible above sticky elements */
  z-index: 40;
}

:focus-visible {
  /* Ensure focus ring appears above overlapping elements */
  position: relative;
  z-index: 1;
}

/* --------------------------------------------
   2.4.13 Focus Appearance - Level AAA (partial AA support)
   Minimum 2px focus indicator with sufficient contrast
   -------------------------------------------- */
:focus-visible {
  /* Already implemented above with 2px solid outline */
  /* Additional enhancement: ensure focus indicator is at least 2px */
  outline-width: 2px !important;
}

/* --------------------------------------------
   2.5.7 Dragging Movements - Level AA
   Provide alternatives to drag operations
   Note: Implemented in components as needed
   -------------------------------------------- */

/* --------------------------------------------
   2.5.8 Target Size (Minimum) - Level AA
   Interactive elements should be at least 24x24px
   Exception: inline links within text
   -------------------------------------------- */
button,
[role="button"],
input[type="checkbox"],
input[type="radio"],
select,
a:not([class*="inline"]):not(p a):not(li a) {
  min-height: 24px;
  min-width: 24px;
}

/* Touch-friendly targets for mobile - recommended 44x44px */
@media (pointer: coarse) {
  button,
  [role="button"],
  input[type="checkbox"],
  input[type="radio"],
  select {
    min-height: 44px;
    min-width: 44px;
  }

  /* Ensure adequate spacing between touch targets */
  button + button,
  [role="button"] + [role="button"] {
    margin-left: 8px;
  }
}

/* Custom checkbox/radio styling with proper target size */
input[type="checkbox"],
input[type="radio"] {
  /* Ensure the clickable area meets minimum size */
  cursor: pointer;
}

/* --------------------------------------------
   3.2.6 Consistent Help - Level A
   Help mechanisms appear in same relative location
   Note: Implemented via consistent UI placement
   -------------------------------------------- */

/* --------------------------------------------
   3.3.7 Redundant Entry - Level A
   Don't require re-entry of previously submitted info
   Note: Implemented via form state management
   -------------------------------------------- */

/* --------------------------------------------
   3.3.8 Accessible Authentication (Minimum) - Level AA
   Don't require cognitive function tests for auth
   Note: Implemented via auth flow design
   -------------------------------------------- */

/* --------------------------------------------
   3.3.9 Accessible Authentication (Enhanced) - Level AAA
   No object/image recognition required
   Note: Implemented via auth flow design
   -------------------------------------------- */

/* ============================================
   ADDITIONAL ACCESSIBILITY ENHANCEMENTS
   ============================================ */

/* Ensure error messages have proper contrast and don't rely on color alone */
[role="alert"],
.error-message {
  /* Use border in addition to color */
  border-left: 3px solid var(--text-error);
  padding-left: 0.75rem;
}

/* Visible focus for custom controls */
[role="checkbox"]:focus-visible,
[role="radio"]:focus-visible,
[role="switch"]:focus-visible,
[role="slider"]:focus-visible {
  outline: 2px solid var(--focus-ring-color);
  outline-offset: 2px;
}

/* Ensure dialogs/modals trap focus properly */
[role="dialog"],
[role="alertdialog"] {
  /* Ensure modal appears above other content */
  z-index: 50;
}

/* Screen reader only class */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Screen reader only but focusable */
.sr-only-focusable:focus,
.sr-only-focusable:focus-within {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}
